#!/usr/bin/env bash
export EDITOR=vim
UNAME=$(uname)

# DOTFILES HOME
DOTFILES_HOME=$HOME/code/dotfiles
DOTFILES_PRIVATE=$HOME/code/dotfiles.private
DOTFILES_LOCAL="${DOTFILES_PRIVATE}"/.bashrc_local
SECRETS_FILE="${DOTFILES_PRIVATE}"/.bashrc_secrets

## TOOL PATHS
PATH="$PATH:~/packer"; # packer
PATH="~/bin:${DOTFILES_PRIVATE}/bin:$PATH";
AWS_HOME="/opt/aws";

## LANG VERSIONS
PYTHON_VERSION="3.6.5"

# include local config preferences
[[ -e "${HOME}/.myconfigrc" ]] && . "${HOME}/.myconfigrc"

# chrome sandbox
export CHROME_DEVEL_SANDBOX=/usr/local/sbin/chrome-devel-sandbox

# google dev
export GDEV_HOME=~/code/goog
export PATH="$PATH:$GDEV_HOME/depot_tools"

. $DOTFILES_HOME/includes/color.sh
. $DOTFILES_HOME/includes/logging.sh

# not typically using a gnome environment so better to have this off
unset GNOME_KEYRING_CONTROL

# initialize ssh_agent
eval $(ssh-agent) > /dev/null
ssh-add 2> /dev/null

# synaptic client changes
hash synclient 2> /dev/null && synclient > /dev/null 2>&1 && synclient TapButton1=0 TapButton2=0 RTCornerButton=0 RBCornerButton=0 ClickFinger1=0 ClickFinger2=0

# general prompt configuration
. $DOTFILES_HOME/scripts/_prompt.sh

# init aliases
. $DOTFILES_HOME/scripts/_aliases.sh

# bash scripting helpers
if [[ $UNAME -ne 'Darwin' ]]; then
	. $DOTFILES_HOME/scripts/roxterm.sh
	. $DOTFILES_HOME/scripts/screencasting.sh
fi

# git completion
source $DOTFILES_HOME/bin/git-completion.bash

echo -ne "\033]0;Configuring and Installing Languages\007";

# language configuration
echo -ne "${YELLOW}langs:\t${NC}"
. $DOTFILES_HOME/scripts/lang/go.sh
. $DOTFILES_HOME/scripts/lang/node.sh
. $DOTFILES_HOME/scripts/lang/python.sh
. $DOTFILES_HOME/scripts/lang/ruby.sh
. $DOTFILES_HOME/scripts/lang/ocaml.sh
# . $DOTFILES_HOME/scripts/altjs.sh
# . $DOTFILES_HOME/scripts/tools.sh
echo -ne "\n"

# run the npm install script in the $DOTFILES_HOME path
# pushd $DOTFILES_HOME > /dev/null; npm install; popd > /dev/null;

# tune editors
. $DOTFILES_HOME/scripts/editors/intellij.sh

# tune displays, etc
. $DOTFILES_HOME/scripts/displays.sh

# bring in local configuration settings
[[ -e "${DOTFILES_LOCAL}" ]] && source "${DOTFILES_LOCAL}"

# include the bash secrets file
[[ -e "${SECRETS_FILE}" ]] && source "${SECRETS_FILE}"
